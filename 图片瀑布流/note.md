# 图片瀑布流的实现

## 第一次迭代：基本图片渲染

*   **目标：** 将所有图片渲染到页面上的一个容器中。
*   **实现步骤：**
    1.  在 `index.html` 文件中创建一个用于容纳图片的容器，例如一个 `div` 元素，并设置一个合适的 `id`，例如 `image-container`。
    2.  使用 JavaScript 获取 `img` 文件夹中的所有图片。
    3.  遍历图片列表，为每张图片创建一个 `img` 元素。
    4.  将每个 `img` 元素的 `src` 属性设置为图片的路径。
    5.  将所有 `img` 元素添加到容器中。
*   **预期结果：** 页面上显示所有图片的堆叠排列，没有瀑布流效果。

## 第二次迭代：基本瀑布流布局

*   **目标：** 实现基本的瀑布流布局，使图片按照列排列。
*   **实现步骤：**
    1.  计算容器的列数。你可以根据屏幕宽度和每列的宽度来计算列数。例如，如果屏幕宽度是 1200px，每列的宽度是 300px，那么列数就是 4。
    2.  创建一个数组，用于存储每列的高度。数组的长度应该等于列数，初始值都为 0。
    3.  遍历图片列表，将每张图片放置在高度最小的列中。找到高度最小的列，将图片添加到该列。
    4.  设置每张图片的 `position` 为 `absolute`，并根据列的高度和位置进行定位。图片的 `left` 属性应该根据列的宽度和列的索引计算，`top` 属性应该根据列的高度计算。
    5.  更新对应列的高度。将该列的高度增加图片的高度。
*   **预期结果：** 图片按照瀑布流的布局排列。

## 第三次迭代：图片加载优化

*   **目标：** 优化图片加载，提高页面性能。
*   **实现步骤：**
    1.  使用 `Intersection Observer` API 实现图片的懒加载。 `Intersection Observer` API 允许你异步观察目标元素与祖先元素或视口的交叉状态的变化。
    2.  在图片进入可视区域时，才设置 `src` 属性。 当图片进入可视区域时，将图片的 `src` 属性设置为图片的真实路径，从而实现懒加载。
*   **预期结果：** 页面加载速度更快，用户体验更好。

## 第四次迭代：响应式布局

*   **目标：** 实现响应式布局，使瀑布流在不同屏幕尺寸下都能正常显示。
*   **实现步骤：**
    1.  监听窗口的 `resize` 事件。 当窗口大小改变时，触发 `resize` 事件。
    2.  重新计算列数和图片位置。 在 `resize` 事件处理函数中，重新计算列数和图片位置，并更新图片布局。
*   **预期结果：** 瀑布流在不同屏幕尺寸下都能正常显示。
